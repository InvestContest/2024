#Сервис предоставления справочной информации о пользователе и его счетах в Тинькофф Инвестициях

##Получение списка счетов пользователя

[Тинькофф Инвестиции](https://www.tinkoff.ru/invest/) позволяют открывать несколько счетов каждому 
пользователю. Счета так же могут иметь различные типы (брокерский счёт, ИИС, инвесткопилка). 
Для получения списка счетов, их статусов и типов используется метод [getAccounts](/investAPI/users#getaccounts).

Данный метод возвращает только те счета, к которым у пользователя есть доступ. Т.е заблокированные счета выводиться в данном методе не будут. При запросе метода с токеном для одного счета возвращаются данные только по счету, к которому выдан доступ токеном.

##Получение текущих лимитов запросов пользователя.

TINKOFF INVEST API обладает системой динамического назначения лимитов запросов для пользователя. 
Подробнее о тарифной политике можно почитать по ссылке: [Лимиты в TINKOFF INVEST API](/investAPI/limits/).

В ответе данного метода можно получить информацию по лимитам для каждого метода сервиса TINKOFF INVEST API,
а также лимиты, касающиеся stream-соединений.

##Получение маржинальных показателей по счёту

TINKOFF INVEST API предоставляет своим пользователям возможность использовать маржинальную торговлю.
Маржинальная торговля — это режим, в котором можно совершать сделки не только со своими деньгами и 
ценными бумагами, но и с активами, которые вы как бы берёте в долг у брокера. Подробнее о маржинальной
торговле: [Маржинальная торговля](https://help.tinkoff.ru/margin-trade/). 

Для получения показателей маржинальной торговли используется метод [getMarginAttributes](/investAPI/users#getmarginattributes).

Метод [getMarginAttributes](/investAPI/users#getmarginattributes) возвращает следующие параметры: 

* liquid_portfolio - Стоимость плановых позиций активов, которые признаны ликвидными (для которых определены ставки риска).
* starting_margin - Сумма модулей стоимостей плановых позиций активов, которые признаны ликвидными, умноженных на начальные ставки риска
* minimal_margin - Сумма модулей стоимостей плановых позиций активов, которые признаны ликвидными, умноженных на минимальные ставки риска
* funds_sufficiency_level - Уровень достаточности средств. (Стоимость портфеля - Мин.маржа)/(Нач.маржа – Мин.маржа). Округляем до двух знаков после запятой.
* amount_of_missing_funds - Объем недостающих средств. Высчитывается по формуле starting_margin - liquid_portfolio . 
* corrected_Margin - Начальная маржа, в которой плановые позиции рассчитываются с учётом активных заявок на покупку позиций лонг или продажу позиций шорт

##Получение информации о статусе пользователя

Для определения различных атрибутов пользователя можно использовать метод [getInfo](/investAPI/users#getinfo).
Данный метод позволяет узнать имеет ли пользователь статус квалифицированного инвестора, является ли 
премиальным клиентом, а также получить список типов инструментов, к которым имеет доступ по итогам тестирования. 





